import { ref, computed, App } from 'vue'

export type Lang = 'fr' | 'en'

const defaultLang = (localStorage.getItem('lang') as Lang) || 'fr'
const langRef = ref<Lang>(defaultLang)

const messages = {
  fr: {
    dashboardTitle: 'Tableau de bord',
    logout: 'Se déconnecter',
    title: 'Se connecter',
    registerTitle: 'Créer un compte',
    username: 'Nom d\'utilisateur',
    emailOrUsername: 'Email ou Nom d\'utilisateur',
    email: 'Adresse E-mail',
    password: 'Mot de passe',
    firstName: 'Prénom',
    lastName: 'Nom',
    phoneNumber: 'Téléphone',
    age: 'Âge',
    confirmPassword: 'Confirmer le mot de passe',
    login: 'Connexion',
    register: 'S\'inscrire',
    noAccount: "Vous n'avez pas de compte ? ",
    forgot: 'Mot de passe oublié ?',
    badCreds: 'Erreur de connexion, identifiants incorrects',
    error: 'Erreur de connexion, veuillez réessayer',
    emailRequired: 'Adresse e-mail requise',
    emailInvalid: 'Format e-mail invalide',
    passwordRequired: 'Mot de passe requis',
    passwordMin: 'Minimum 6 caractères',
    firstNameRequired: 'Prénom requis',
    lastNameRequired: 'Nom requis',
    phoneRequired: 'Téléphone requis',
    ageRequired: 'Âge requis',
    ageInvalid: 'Âge invalide',
    confirmPasswordRequired: 'Confirmation du mot de passe requise',
    passwordsNotMatch: 'Les mots de passe ne correspondent pas',
    passwordsMatch: 'Les mots de passe correspondent',
    passwordResetSuccess: 'Votre mot de passe a été réinitialisé avec succès',
    passwordResetError: 'Erreur lors de la réinitialisation du mot de passe',
    otpRequired: 'Code OTP requis',
    otpInvalid: 'Code OTP invalide (4-6 chiffres)',
    otpIncorrect: 'Code OTP incorrect',
    otpSent: 'Code OTP envoyé avec succès',
    otpSendError: 'Erreur lors de l\'envoi du code OTP',
    sendOtp: 'Envoyer le code OTP',
    resetByEmail: 'Réinitialiser par email',
    resetByPhone: 'Réinitialiser par téléphone',
    otpCode: 'Code OTP',
    selectResetMethod: 'Choisissez votre méthode de réinitialisation',
    cancel: 'Annuler',
    resetPassword: 'Réinitialiser le mot de passe',
    newPassword: 'Nouveau mot de passe',
    resetButton: 'Réinitialiser',
    emailIncorrect: 'Email incorrect',
    passwordIncorrect: 'Mot de passe incorrect',
    emailExists: 'Cet email existe déjà',
    phoneExists: 'Ce numéro de téléphone existe déjà',
    googleSignInComing: 'Connexion Google à venir',
    appleSignInComing: 'Connexion Apple à venir',
    resettingPassword: 'Réinitialisation du mot de passe en cours...',
    missingRequiredFields: 'Tous les champs requis doivent être remplis',
    otpExpired: 'Le code OTP a expiré. Veuillez demander un nouveau code.',
    phoneNotFound: 'Ce numéro de téléphone n\'existe pas dans notre base de données.',
    phoneValidationError: 'Le numéro de téléphone doit contenir au moins 8 chiffres',
    phoneLengthError: 'Le numéro de téléphone pour {country} doit contenir {length} chiffres',
    phoneLengthErrorGeneric: 'Le numéro de téléphone doit contenir entre 7 et 15 chiffres',
    requestNewOtp: 'Veuillez cliquer sur "Envoyer le code OTP" pour obtenir un nouveau code.',
    wrongDataProvided: 'Données incorrectes fournies.',
    userInfo: 'Informations utilisateur',
    notProvided: 'Non renseigné',
    loadingUserInfo: 'Chargement des informations utilisateur...',
    serverError: 'Erreur serveur. Veuillez réessayer plus tard.',
    refresh: 'Actualiser',
    retry: 'Réessayer',
    userInfoError: 'Erreur lors du chargement des informations utilisateur',
    userInfoLoaded: 'Informations utilisateur chargées avec succès',
    logoutSuccess: 'Déconnexion réussie',
    logoutError: 'Erreur lors de la déconnexion',
    notAuthenticated: 'Vous n\'êtes pas authentifié',
    welcomeTitle: 'Bienvenue sur SanteLink',
    welcomeDescription: 'Votre plateforme de santé connectée pour un suivi médical optimal et des consultations en ligne.',
    getStarted: 'Commencer',
    createAccount: 'Créer un compte',
    appName: 'SanteLink',
    beginJourney: 'Commencez votre voyage vers une meilleure santé !',
    continueWithPhone: 'Continuer avec le numéro de téléphone',
    continueWithGoogle: 'Continuer avec Google',
    continueWithApple: 'Continuer avec Apple',
    alreadyHaveAccount: 'Vous avez déjà un compte ?',
    signIn: 'Se connecter',
    bySigningUpText: 'En vous inscrivant ou en vous connectant, j\'accepte les',
    termsOfService: 'Conditions d\'utilisation',
    and: ' et ',
    privacyPolicy: 'Politique de confidentialité',
    welcome: 'Bienvenue',
    welcomeQuote: 'Nous vous aiderons à planifier efficacement et facilement des rendez-vous avec des médecins.',
    letsGetStarted: 'Commençons !',
    googleLoginNotImplemented: 'Connexion Google à venir bientôt',
    appleLoginNotImplemented: 'Connexion Apple à venir bientôt',
    welcomeBack: 'Bon retour',
    pleaseEnterFormToLogin: 'Veuillez entrer vos informations pour vous connecter',
    enterYourFullName: 'Entrez votre nom complet',
    enterYourPassword: 'Entrez votre mot de passe',
    signingIn: 'Connexion en cours...',
    testimonialQuote: 'Nous vous aiderons à programmer efficacement et facilement des rendez-vous avec des médecins.',
    enterPhoneToContinue: 'Veuillez entrer votre numéro pour continuer votre inscription',
    phonePlaceholder: 'e.g 812-3123-3123',
    continue: 'Continuer',
    sendOTPCode: 'Envoyer le code OTP',
    enterThe6Digit: 'Entrez le code à 6 chiffres que nous avons envoyé via le',
    phoneNumberTo: 'numéro de téléphone à',
    resendCodeIn: 'Renvoyer le code dans',
    otpVerifiedSuccessfully: 'Code OTP vérifié avec succès !',
    codeExpired: 'Le code a expiré. Veuillez demander un nouveau code.',
    invalidCode: 'Code invalide. Veuillez vérifier et réessayer.',
    connectionError: 'Erreur de connexion. Veuillez réessayer.',
    otpResentSuccessfully: 'Code OTP renvoyé avec succès !',
    
    // Messages pour Register.vue
    pleaseEnterFormToContinue: 'Veuillez remplir le formulaire pour continuer l\'inscription',
    fullName: 'Nom complet',
    enterYourEmail: 'Entrez votre email',
    confirmYourPassword: 'Confirmez votre mot de passe',
    weak: 'Faible',
    medium: 'Moyen',
    strong: 'Fort',
    pleaseFillAllFields: 'Veuillez remplir tous les champs',
    passwordsDoNotMatch: 'Les mots de passe ne correspondent pas',
    passwordTooWeak: 'Le mot de passe est trop faible',
    registrationSuccessful: 'Inscription réussie',
    registrationFailed: 'Échec de l\'inscription',
    signingUp: 'Inscription en cours...',
    signUp: 'S\'inscrire',
    enterYourEmailOrUsername: 'Entrez votre email ou nom d\'utilisateur'
  },
  en: {
    dashboardTitle: 'Dashboard',
    logout: 'Logout',
    title: 'Sign in',
    registerTitle: 'Create account',
    username: 'Username',
    emailOrUsername: 'Email or Username',
    email: 'Email address',
    password: 'Password',
    firstName: 'First name',
    lastName: 'Last name',
    phoneNumber: 'Phone number',
    age: 'Age',
    confirmPassword: 'Confirm password',
    login: 'Login',
    register: 'Register',
    noAccount: "Don't have an account? ",
    forgot: 'Forgot password?',
    badCreds: 'Login failed, wrong credentials',
    error: 'Login error, please try again',
    emailRequired: 'Email is required',
    emailInvalid: 'Invalid email format',
    passwordRequired: 'Password is required',
    passwordMin: 'Minimum 6 characters',
    firstNameRequired: 'First name is required',
    lastNameRequired: 'Last name is required',
    phoneRequired: 'Phone number is required',
    ageRequired: 'Age is required',
    ageInvalid: 'Invalid age',
    confirmPasswordRequired: 'Password confirmation required',
    passwordsNotMatch: 'Passwords do not match',
    passwordsMatch: 'Passwords match',
    passwordResetSuccess: 'Your password has been reset successfully',
    passwordResetError: 'Error resetting password',
    otpRequired: 'OTP code required',
    otpInvalid: 'Invalid OTP code (4-6 digits)',
    otpIncorrect: 'Incorrect OTP code',
    otpSent: 'OTP code sent successfully',
    otpSendError: 'Error sending OTP code',
    sendOtp: 'Send OTP code',
    resetByEmail: 'Reset by email',
    resetByPhone: 'Reset by phone',
    otpCode: 'OTP Code',
    selectResetMethod: 'Choose your reset method',
    cancel: 'Cancel',
    resetPassword: 'Reset password',
    newPassword: 'New password',
    resetButton: 'Reset',
    emailIncorrect: 'Incorrect email',
    passwordIncorrect: 'Incorrect password',
    emailExists: 'This email already exists',
    phoneExists: 'This phone number already exists',
    googleSignInComing: 'Google Sign-In coming soon',
    appleSignInComing: 'Apple Sign-In coming soon',
    resettingPassword: 'Resetting password...',
    missingRequiredFields: 'All required fields must be filled',
    otpExpired: 'The OTP code has expired. Please request a new code.',
    phoneNotFound: 'This phone number does not exist in our database.',
    phoneValidationError: 'Phone number must contain at least 8 digits',
    phoneLengthError: 'Phone number for {country} must contain {length} digits',
    phoneLengthErrorGeneric: 'Phone number must contain between 7 and 15 digits',
    requestNewOtp: 'Please click "Send OTP" to get a new code.',
    wrongDataProvided: 'Wrong data provided.',
    userInfo: 'User Information',
    notProvided: 'Not provided',
    loadingUserInfo: 'Loading user information...',
    serverError: 'Server error. Please try again later.',
    refresh: 'Refresh',
    retry: 'Retry',
    userInfoError: 'Error loading user information',
    userInfoLoaded: 'User information loaded successfully',
    logoutSuccess: 'Logout successful',
    logoutError: 'Error during logout',
    notAuthenticated: 'You are not authenticated',
    welcomeTitle: 'Welcome to SanteLink',
    welcomeDescription: 'Your connected health platform for optimal medical monitoring and online consultations.',
    getStarted: 'Get Started',
    createAccount: 'Create Account',
    appName: 'SanteLink',
    beginJourney: 'Begin your journey to better health!',
    continueWithPhone: 'Continue With Phone Number',
    continueWithGoogle: 'Continue with Google',
    continueWithApple: 'Continue with Apple',
    alreadyHaveAccount: 'Already have an account? ',
    signIn: 'Sign In',
    bySigningUpText: 'By signing up or logging in, I accept the apps',
    termsOfService: 'Terms of Service',
    and: 'and',
    privacyPolicy: 'Privacy Policy',
    welcome: 'Welcome',
    welcomeQuote: 'We will assist you in efficiently and easily scheduling appointments with doctors.',
    letsGetStarted: 'Let\'s get started!',
    googleLoginNotImplemented: 'Google login coming soon',
    appleLoginNotImplemented: 'Apple login coming soon',
    welcomeBack: 'Welcome Back',
    pleaseEnterFormToLogin: 'Please enter your information to login',
    enterYourFullName: 'Enter your full name',
    enterYourPassword: 'Enter your password',
    signingIn: 'Signing in...',
    testimonialQuote: 'We will assist you in efficiently and easily scheduling appointments with doctors.',
    enterPhoneToContinue: 'Please enter your number to continue your registration',
    phonePlaceholder: 'e.g 812-3123-3123',
    continue: 'Continue',
    sendOTPCode: 'Send OTP Code',
    enterThe6Digit: 'Enter the 6-digit code that we have sent via the',
    phoneNumberTo: 'phone number to',
    resendCodeIn: 'Resend code in',
    otpVerifiedSuccessfully: 'OTP code verified successfully!',
    codeExpired: 'The code has expired. Please request a new code.',
    invalidCode: 'Invalid code. Please check and try again.',
    connectionError: 'Connection error. Please try again.',
    otpResentSuccessfully: 'OTP code resent successfully!',
    
    // Messages pour Register.vue
    pleaseEnterFormToContinue: 'Please fill out the form to continue your registration',
    fullName: 'Full Name',
    enterYourEmail: 'Enter your email',
    confirmYourPassword: 'Confirm your password',
    weak: 'Weak',
    medium: 'Medium',
    strong: 'Strong',
    pleaseFillAllFields: 'Please fill all fields',
    passwordsDoNotMatch: 'Passwords do not match',
    passwordTooWeak: 'Password is too weak',
    registrationSuccessful: 'Registration successful',
    registrationFailed: 'Registration failed',
    signingUp: 'Signing up...',
    signUp: 'Sign up',
    enterYourEmailOrUsername: 'Enter your email or username'
  }
} as const

export const t = (key: keyof typeof messages['fr']) => {
  return messages[langRef.value][key]
}

export const currentLang = computed(() => langRef.value)

export const setLang = (lng: Lang) => {
  langRef.value = lng
  localStorage.setItem('lang', lng)
  document.documentElement.setAttribute('lang', lng)
}

export const i18nPlugin = {
  install(app: App) {
    // expose as global property
    app.config.globalProperties.$t = t
  }
}

// initialize document lang on import
document.documentElement.setAttribute('lang', defaultLang)

export default i18nPlugin


